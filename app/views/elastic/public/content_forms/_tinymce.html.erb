<% 
  cfg = content_config.meta['config_file']
  fpath = File.join Elastic::Context.site.theme_dir, cfg if cfg
%>

<% if cfg.blank? %>

	<%= form_helper.text_area 'text', :value=>(content ? content.text : nil), 
		:style=>"width: 100%; height: 100%", :class=>'tinymce' %> 
		
	<%= render :partial=>'/elastic/editor/nodes/tinymce_default' %>

<% elsif File.exists? fpath %>

	<%= form_helper.text_area 'text', :value=>(content ? content.text : nil), 
		:style=>"width: 100%; height: 100%", :class=>'tinymce' %> 
	
	<%= render :file=>fpath %>
<% else %>

  <%=werror "TinyMCE config file '#{cfg}' do not exist." %>

<% end %>
